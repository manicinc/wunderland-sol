// File: frontend/src/styles/components/_cards.scss
/**
 * @file _cards.scss
 * @description Base styling & reusable "look" mixins for card components.
 * Showcases themeable glassmorphic and neomorphic card styles, suitable for
 * various content containers within the "Ephemeral Harmony" design system.
 * @version 2.0.6 - Corrected SASS parameter names in glassmorphic-pane mixin call to use 'fb-' prefix. Ensured calc() usage for CSS calculations.
 */

@use '../abstracts/variables' as var;
@use '../abstracts/mixins' as mixins;

// --- Base Card Style Mixin (Structural & Common Interactive Properties) ---
@mixin card-base-styles {
  border-radius: var.$radius-xl;
  padding: var.$spacing-lg;
  transition: var.$duration-smooth var.$ease-out-quad;
  transition-property: background-color, border-color, box-shadow, transform;
  will-change: transform, box-shadow;
  position: relative;
  overflow: hidden;
}

// --- Look Mixins (Define specific visual appearances) ---

// Glassmorphic Card Look
@mixin card-glass-look {
  @include mixins.glassmorphic-pane(
    $bg-color-css-var-prefix: '--color-bg-glass',
    $border-color-css-var-prefix: '--color-border-glass',
    $blur-amount-css-var: '--blur-glass',
    $shadow-css-var: '--shadow-depth-lg',
    // SCSS Fallback HSL(A) values - Corrected to use fb- prefix
    $fb-bg-h: var.$default-color-bg-glass-h, 
    $fb-bg-s: var.$default-color-bg-glass-s, 
    $fb-bg-l: var.$default-color-bg-glass-l, 
    $fb-bg-a: var.$default-color-bg-glass-a,
    $fb-border-h: var.$default-color-border-glass-h, 
    $fb-border-s: var.$default-color-border-glass-s, 
    $fb-border-l: var.$default-color-border-glass-l, 
    $fb-border-a: var.$default-color-border-glass-a,
    $fb-blur: var.$default-blur-glass,
    $fb-shadow: var.$scss-box-shadow-lg
  );

  &:hover {
    transform: translateY(-3px) scale(1.01);
    border-color: hsla(
      var(--color-accent-primary-h, #{var.$default-color-accent-primary-h}),
      var(--color-accent-primary-s, #{var.$default-color-accent-primary-s}),
      var(--color-accent-primary-l, #{var.$default-color-accent-primary-l}),
      // Use CSS calc() for calculations involving CSS variables
      calc(var(--color-border-glass-a, #{var.$default-color-border-glass-a}) + 0.2) 
    );
    box-shadow: 
      0 12px 35px hsla(
        var(--shadow-color-h, #{var.$default-shadow-color-h}),
        var(--shadow-color-s, #{var.$default-shadow-color-s}),
        var(--shadow-color-l, #{var.$default-shadow-color-l}),
        calc(var(--shadow-opacity-deep, #{var.$default-shadow-opacity-deep}) + 0.05)
      ),
      0 0 15px hsla(
        var(--color-accent-primary-h, #{var.$default-color-accent-primary-h}),
        var(--color-accent-primary-s, #{var.$default-color-accent-primary-s}),
        var(--color-accent-primary-l, #{var.$default-color-accent-primary-l}),
        0.1
      );
  }
}

// Neomorphic Card Look (Extruded)
@mixin card-neo-look {
  @include mixins.neomorphic-extrude(
    $bg-color-var-prefix: '--color-bg-secondary',
    $distance: 6px,
    $blur: 15px,
    $shadow-opacity-var: '--shadow-opacity-soft',
    $radius: var.$radius-xl,
    $shadow-h-var: '--shadow-color-h',
    $shadow-s-var: '--shadow-color-s',
    $shadow-l-var: '--shadow-color-l',
    $highlight-l-modifier-css-var: '--shadow-highlight-modifier',
    $fb-bg-h: var.$default-color-bg-secondary-h, $fb-bg-s: var.$default-color-bg-secondary-s, $fb-bg-l: var.$default-color-bg-secondary-l, $fb-bg-a: var.$fb-bg-a,
    $fb-shadow-op: var.$default-shadow-opacity-soft,
    $fb-shadow-h: var.$default-shadow-color-h, $fb-shadow-s: var.$default-shadow-color-s, $fb-shadow-l: var.$default-shadow-color-l,
    $fb-highlight-l-factor: var.$default-shadow-highlight-l-factor
  );
  border: none;

  &:hover {
    @include mixins.neomorphic-extrude(
      $bg-color-var-prefix: '--color-bg-secondary',
      $distance: 8px,
      $blur: 18px,
      $shadow-opacity-var: '--shadow-opacity-deep',
      $radius: var.$radius-xl,
      $shadow-h-var: '--shadow-color-h',
      $shadow-s-var: '--shadow-color-s',
      $shadow-l-var: '--shadow-color-l',
      $highlight-l-modifier-css-var: '--shadow-highlight-modifier',
      $fb-bg-h: var.$default-color-bg-secondary-h, $fb-bg-s: var.$default-color-bg-secondary-s, $fb-bg-l: var.$default-color-bg-secondary-l, $fb-bg-a: var.$fb-bg-a,
      $fb-shadow-op: var.$default-shadow-opacity-deep,
      $fb-shadow-h: var.$default-shadow-color-h, $fb-shadow-s: var.$default-shadow-color-s, $fb-shadow-l: var.$default-shadow-color-l,
      $fb-highlight-l-factor: var.$default-shadow-highlight-l-factor
    );
    transform: translateY(-2px);
  }
}

// Holographic Accent Border Look
@mixin card-holo-accent-look {
  @include mixins.holographic-border-glow(
    $accent-color-var-prefix: '--color-accent-secondary',
    $secondary-accent-var-prefix: '--color-accent-primary',
    $border-width: 1px,
    $animation-duration: 3s,
    $radius: var.$radius-xl
  );
}

// --- Utility Classes ---
.card-base {
  @include card-base-styles;
}

.card-glass {
  @include card-base-styles;
  @include card-glass-look;
}

.card-neo {
  @include card-base-styles;
  @include card-neo-look;
}

.card-interactive {
  cursor: pointer;
  &:active {
    transform: translateY(0px) scale(0.99);
  }
}

.card-holo-accent {
  @include card-base-styles;
  @include card-glass-look; 
  @include card-holo-accent-look;
}

// --- Specific Card Variants ---
.card-glass-interactive--about {
  @include card-base-styles;
  @include card-glass-look;
  @extend .card-interactive;
}

.card-neo-interactive--about {
  @include card-base-styles;
  @include card-neo-look;
  @extend .card-interactive;
}

.card-neo-subtle--about {
  @include card-base-styles;
  @include mixins.neomorphic-extrude(
    $bg-color-var-prefix: '--color-bg-secondary',
    $distance: 3px,
    $blur: 6px,
    $shadow-opacity-var: '--shadow-opacity-soft',
    $radius: var.$radius-lg,
    $shadow-h-var: '--shadow-color-h', $shadow-s-var: '--shadow-color-s', $shadow-l-var: '--shadow-color-l',
    $highlight-l-modifier-css-var: '--shadow-highlight-modifier',
    $fb-bg-h: var.$default-color-bg-secondary-h, $fb-bg-s: var.$default-color-bg-secondary-s, $fb-bg-l: var.$default-color-bg-secondary-l, $fb-bg-a: var.$fb-bg-a,
    $fb-shadow-op: var.$default-shadow-opacity-soft,
    $fb-shadow-h: var.$default-shadow-color-h, $fb-shadow-s: var.$default-shadow-color-s, $fb-shadow-l: var.$default-shadow-color-l,
    $fb-highlight-l-factor: var.$default-shadow-highlight-l-factor
  );
  border: none;
}
