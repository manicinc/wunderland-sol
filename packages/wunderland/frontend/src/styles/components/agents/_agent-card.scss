// File: frontend/src/styles/components/agents/_agent-card.scss
/**
 * @file _agent-card.scss
 * @description Styles for the AgentCard.vue component, embodying the "Ephemeral Harmony"
 * neo-holographic design language. Features dynamic hover/active states,
 * clear visual hierarchy for agent information, and theme-aware styling.
 *
 * @role Defines the visual appearance and interactive feedback for agent cards.
 * @dependencies `../../abstracts/variables`, `../../abstracts/mixins`, `../cards`.
 * @version 1.0.2 - Corrected SASS parameter name in neomorphic-inset mixin call. Ensured calc() usage and consistent variable fallbacks.
 */

@use '../../abstracts/variables' as var;
@use '../../abstracts/mixins' as mixins;
// @use '../cards' as cardsFile; // Base card styles are not directly extended here; custom implementation is primary.

.agent-card-ephemeral {
  @include mixins.neomorphic-extrude(
    $bg-color-var-prefix: '--color-bg-secondary', 
    $distance: 5px,
    $blur: 12px,
    $shadow-opacity-var: '--shadow-opacity-soft',
    $radius: var.$radius-xl,
    $shadow-h-var: '--shadow-color-h',
    $shadow-s-var: '--shadow-color-s',
    $shadow-l-var: '--shadow-color-l',
    $highlight-l-modifier-css-var: '--shadow-highlight-modifier',
    // SCSS Fallbacks
    $fb-bg-h: var.$default-color-bg-secondary-h,
    $fb-bg-s: var.$default-color-bg-secondary-s,
    $fb-bg-l: calc(#{var.$default-color-bg-secondary-l} + 2%), // SASS calc for lightness adjustment
    $fb-bg-a: 0.98, 
    $fb-shadow-op: var.$default-shadow-opacity-soft,
    $fb-shadow-h: var.$default-shadow-color-h,
    $fb-shadow-s: var.$default-shadow-color-s,
    $fb-shadow-l: var.$default-shadow-color-l,
    $fb-highlight-l-factor: var.$default-shadow-highlight-l-factor
  );
  border: 1px solid hsla(var(--color-border-primary-h, #{var.$default-color-border-primary-h}), var(--color-border-primary-s, #{var.$default-color-border-primary-s}), var(--color-border-primary-l, #{var.$default-color-border-primary-l}), 0.1);
  display: flex;
  flex-direction: column;
  height: 100%; 
  min-height: 260px; 
  transition: transform 0.3s var.$ease-elastic,
              box-shadow 0.35s var.$ease-out-quad,
              border-color 0.3s var.$ease-out-quad;
  will-change: transform, box-shadow;
  position: relative; 
  overflow: hidden;   
  background:
    radial-gradient(140% 140% at 20% -10%, hsla(var(--color-accent-primary-h, #{var.$default-color-accent-primary-h}), var(--color-accent-primary-s, #{var.$default-color-accent-primary-s}), var(--color-accent-primary-l, #{var.$default-color-accent-primary-l}), 0.22), transparent 55%),
    radial-gradient(160% 160% at 90% 0%, hsla(var(--color-accent-secondary-h, #{var.$default-color-accent-secondary-h}), var(--color-accent-secondary-s, #{var.$default-color-accent-secondary-s}), var(--color-accent-secondary-l, #{var.$default-color-accent-secondary-l}), 0.18), transparent 60%),
    hsla(var(--color-bg-secondary-h, #{var.$default-color-bg-secondary-h}), var(--color-bg-secondary-s, #{var.$default-color-bg-secondary-s}), calc(var(--color-bg-secondary-l, #{var.$default-color-bg-secondary-l}) - 4%), 0.92);
  backdrop-filter: blur(14px) saturate(140%);

  &::before {
    content: '';
    position: absolute;
    inset: 0;
    background: linear-gradient(135deg, hsla(var(--color-text-primary-h, #{var.$default-color-text-primary-h}), var(--color-text-primary-s, #{var.$default-color-text-primary-s}), var(--color-text-primary-l, #{var.$default-color-text-primary-l}), 0.05), transparent 35%, hsla(var(--color-bg-secondary-h, #{var.$default-color-bg-secondary-h}), var(--color-bg-secondary-s, #{var.$default-color-bg-secondary-s}), calc(var(--color-bg-secondary-l, #{var.$default-color-bg-secondary-l}) + 3%), 0.25));
    pointer-events: none;
    opacity: 0.75;
    mix-blend-mode: screen;
    transition: opacity var.$duration-smooth;
  }

  &.card-interactive-ephemeral::after {
    content: '';
    position: absolute;
    inset: -2px; 
    border-radius: inherit;
    padding: 2px; 
    background: conic-gradient(
      from 0deg,
      hsla(var(--color-accent-primary-h, #{var.$default-color-accent-primary-h}), var(--color-accent-primary-s, #{var.$default-color-accent-primary-s}), var(--color-accent-primary-l, #{var.$default-color-accent-primary-l}), 0),
      hsla(var(--color-accent-secondary-h, #{var.$default-color-accent-secondary-h}), var(--color-accent-secondary-s, #{var.$default-color-accent-secondary-s}), var(--color-accent-secondary-l, #{var.$default-color-accent-secondary-l}), 0.3),
      hsla(var(--color-accent-primary-h, #{var.$default-color-accent-primary-h}), var(--color-accent-primary-s, #{var.$default-color-accent-primary-s}), var(--color-accent-primary-l, #{var.$default-color-accent-primary-l}), 0)
    );
    -webkit-mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
    mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
    -webkit-mask-composite: xor;
    mask-composite: exclude;
    animation: holo-border-spin 8s linear infinite;
    opacity: 0; 
    transition: opacity var.$duration-smooth;
    z-index: 0; 
  }

  &.card-interactive-ephemeral:hover,
  &.card-interactive-ephemeral:focus-visible {
    transform: translateY(-7px) scale(1.035); 
    border-color: hsla(var(--color-accent-interactive-h, #{var.$default-color-accent-interactive-h}), var(--color-accent-interactive-s, #{var.$default-color-accent-interactive-s}), var(--color-accent-interactive-l, #{var.$default-color-accent-interactive-l}), 0.4);
    box-shadow:
      8px 8px 18px hsla(var(--shadow-color-h, #{var.$default-shadow-color-h}), var(--shadow-color-s, #{var.$default-shadow-color-s}), var(--shadow-color-l, #{var.$default-shadow-color-l}), calc(var(--shadow-opacity-medium, #{var.$default-shadow-opacity-medium}) + 0.05)),
      -8px -8px 18px hsla(var(--shadow-color-h, #{var.$default-shadow-color-h}), var(--shadow-color-s, #{var.$default-shadow-color-s}), calc(var(--shadow-color-l, #{var.$default-shadow-color-l}) + var(--shadow-highlight-modifier, 10%)), calc(var(--shadow-opacity-medium, #{var.$default-shadow-opacity-medium}) + 0.05)),
      0 0 25px 4px hsla(var(--color-accent-interactive-h, #{var.$default-color-accent-interactive-h}), var(--color-accent-interactive-s, #{var.$default-color-accent-interactive-s}), var(--color-accent-interactive-l, #{var.$default-color-accent-interactive-l}),0.35);

    &::after { 
      opacity: 0.8;
      animation-duration: 4s; 
    }
    &::before {
      opacity: 1;
    }
    .agent-name-ephemeral { 
      @include mixins.text-glow(
        $glow-color-var-prefix: '--color-accent-interactive',
        $glow-radius: 6px,
        $fb-glow-h: var.$default-color-accent-interactive-h,
        $fb-glow-s: var.$default-color-accent-interactive-s,
        $fb-glow-l: var.$default-color-accent-interactive-l,
        $fb-glow-a: 0.5
      );
    }
  }
  &.card-interactive-ephemeral:focus-visible { 
      @include mixins.focus-ring(
        $base-bg-color-var-prefix: '--color-bg-secondary',
        $ring-accent-color-var-prefix: '--color-accent-interactive',
        $offset-width: 2px, $ring-thickness: 2px, $ring-opacity: 0.9
      );
  }

  &.is-active-agent {
    border-width: 2px;
    border-color: hsl(var(--color-accent-interactive-h, #{var.$default-color-accent-interactive-h}), var(--color-accent-interactive-s, #{var.$default-color-accent-interactive-s}), var(--color-accent-interactive-l, #{var.$default-color-accent-interactive-l}));
    transform: scale(1.02); 
    box-shadow: 
      0 0 30px hsla(var(--color-accent-interactive-h, #{var.$default-color-accent-interactive-h}), var(--color-accent-interactive-s, #{var.$default-color-accent-interactive-s}), var(--color-accent-interactive-l, #{var.$default-color-accent-interactive-l}), 0.5),
      6px 6px 15px hsla(var(--shadow-color-h, #{var.$default-shadow-color-h}),var(--shadow-color-s, #{var.$default-shadow-color-s}),var(--shadow-color-l, #{var.$default-shadow-color-l}), var(--shadow-opacity-medium, #{var.$default-shadow-opacity-medium})),
      -6px -6px 15px hsla(var(--shadow-color-h, #{var.$default-shadow-color-h}),var(--shadow-color-s, #{var.$default-shadow-color-s}),calc(var(--shadow-color-l, #{var.$default-shadow-color-l}) + var(--shadow-highlight-modifier, 10%)), var(--shadow-opacity-medium, #{var.$default-shadow-opacity-medium}));

    &::after { 
      opacity: 1;
      animation-duration: 5s;
    }
    &::before {
      opacity: 1;
    }
    .agent-name-ephemeral {
      color: hsl(var(--color-accent-interactive-h, #{var.$default-color-accent-interactive-h}), var(--color-accent-interactive-s, #{var.$default-color-accent-interactive-s}), var(--color-accent-interactive-l, #{var.$default-color-accent-interactive-l}));
    }
  }

  &.is-locked-agent {
    cursor: not-allowed;
    .agent-card-content-wrapper { 
      filter: grayscale(70%) opacity(0.55);
      transition: filter var.$duration-smooth;
    }
    &:hover, &:focus-visible {
      transform: none; box-shadow: inherit; 
      &::after { opacity: 0; } 
    }
  }
}

.locked-overlay-ephemeral {
  position: absolute;
  inset: 0;
  background-color: hsla(var(--color-bg-primary-h, #{var.$default-color-bg-primary-h}), var(--color-bg-primary-s, #{var.$default-color-bg-primary-s}), calc(var(--color-bg-primary-l, #{var.$default-color-bg-primary-l}) + 5%), 0.85);
  backdrop-filter: blur(5px);
  -webkit-backdrop-filter: blur(5px);
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  z-index: 2;
  border-radius: inherit;
  color: hsl(var(--color-text-muted-h, #{var.$default-color-text-muted-h}), var(--color-text-muted-s, #{var.$default-color-text-muted-s}), var(--color-text-muted-l, #{var.$default-color-text-muted-l}));
  text-align: center;
  padding: var.$spacing-md;
  animation: fadeIn 0.35s var.$ease-out-quad;

  .locked-icon {
    width: 2.5rem; height: 2.5rem;
    margin-bottom: var.$spacing-sm;
    opacity: 0.75;
    color: hsl(var(--color-warning-h, #{var.$default-color-warning-h}), var(--color-warning-s, #{var.$default-color-warning-s}), calc(var(--color-warning-l, #{var.$default-color-warning-l}) + 5%));
    filter: drop-shadow(0 0 5px hsla(var(--color-warning-h, #{var.$default-color-warning-h}),var(--color-warning-s, #{var.$default-color-warning-s}),var(--color-warning-l, #{var.$default-color-warning-l}),0.5));
  }
  .locked-text {
    font-weight: 600;
    font-size: var.$font-size-sm;
    letter-spacing: 0.025em;
  }
}

.agent-card-content-wrapper { 
  display: flex;
  flex-direction: column;
  flex-grow: 1;
  padding: var.$spacing-lg; 
  position: relative; z-index: 1; 
}

.agent-card-header-ephemeral {
  display: flex;
  align-items: flex-start; 
  gap: var.$spacing-md;
  margin-bottom: var.$spacing-md;
  position: relative;

  .agent-icon-wrapper-ephemeral {
    width: 48px; height: 48px; 
    border-radius: var.$radius-lg;
    display: flex; align-items: center; justify-content: center; flex-shrink: 0;
    @include mixins.neomorphic-inset( 
      $fill-color-var-prefix: '--color-bg-tertiary',
      $blur: 4px, $distance: 2px,
      $shadow-opacity-var: '--shadow-opacity-soft',
      $radius: var.$radius-lg,
      $fb-fill-a: 0.7 // Corrected parameter name from $fb-bg-a to $fb-fill-a
    );
    transition: transform var.$duration-quick var.$ease-elastic;
    .agent-card-ephemeral:hover & { 
        transform: scale(1.05);
    }

    .agent-icon-ephemeral {
      width: 28px; height: 28px; 
      color: hsl(var(--color-accent-primary-h, #{var.$default-color-accent-primary-h}), var(--color-accent-primary-s, #{var.$default-color-accent-primary-s}), var(--color-accent-primary-l, #{var.$default-color-accent-primary-l}));
      opacity: 0.95;
      transition: transform 0.3s var.$ease-elastic, filter 0.3s var.$ease-out-quad;
      .agent-card-ephemeral:hover & {
          transform: rotate(-5deg) scale(1.1);
          filter: drop-shadow(0 0 5px hsla(var(--color-accent-primary-h, #{var.$default-color-accent-primary-h}),var(--color-accent-primary-s, #{var.$default-color-accent-primary-s}),var(--color-accent-primary-l, #{var.$default-color-accent-primary-l}),0.5));
      }
    }
  }

  .agent-title-group-ephemeral { flex-grow: 1; min-width: 0; } 
  .agent-name-ephemeral {
    font-size: calc(#{var.$font-size-lg} + 0.1rem); 
    font-weight: 700; 
    color: hsl(var(--color-text-primary-h, #{var.$default-color-text-primary-h}), var(--color-text-primary-s, #{var.$default-color-text-primary-s}), var(--color-text-primary-l, #{var.$default-color-text-primary-l}));
    line-height: 1.3;
    margin-bottom: calc(#{var.$spacing-xs} / 2); // SASS calc
    transition: color var.$duration-quick;
  }
  .agent-category-ephemeral {
    font-size: var.$font-size-xs;
    color: hsl(var(--color-text-muted-h, #{var.$default-color-text-muted-h}), var(--color-text-muted-s, #{var.$default-color-text-muted-s}), var(--color-text-muted-l, #{var.$default-color-text-muted-l}));
    font-weight: 500;
    text-transform: uppercase;
    letter-spacing: 0.05em; 
    opacity: 0.85;
  }

  .selected-checkmark-ephemeral {
    width: 1.75rem; height: 1.75rem; 
    color: hsl(var(--color-success-h, #{var.$default-color-success-h}), var(--color-success-s, #{var.$default-color-success-s}), calc(var(--color-success-l, #{var.$default-color-success-l}) - 8%)); 
    margin-left: var.$spacing-sm;
    flex-shrink: 0;
    filter: drop-shadow(0 0 8px hsla(var(--color-success-h, #{var.$default-color-success-h}),var(--color-success-s, #{var.$default-color-success-s}),var(--color-success-l, #{var.$default-color-success-l}),0.7));
    animation: subtlePulse 1.8s var.$ease-in-out-sine infinite alternate;
    --scale-pulse: 1.15; --opacity-pulse: 1;
  }
  .info-button-ephemeral {
    color: hsl(var(--color-text-muted-h, #{var.$default-color-text-muted-h}), var(--color-text-muted-s, #{var.$default-color-text-muted-s}), calc(var(--color-text-muted-l, #{var.$default-color-text-muted-l}) + 10%));
    .icon-xs { width: 1.1rem; height: 1.1rem; }
    &:hover {
      color: hsl(var(--color-info-h, #{var.$default-color-info-h}), var(--color-info-s, #{var.$default-color-info-s}), var(--color-info-l, #{var.$default-color-info-l}));
      background-color: hsla(var(--color-info-h, #{var.$default-color-info-h}),var(--color-info-s, #{var.$default-color-info-s}),var(--color-info-l, #{var.$default-color-info-l}), 0.12) !important;
    }
  }
}

.agent-description-ephemeral {
  font-size: var.$font-size-sm;
  color: hsl(var(--color-text-secondary-h, #{var.$default-color-text-secondary-h}), var(--color-text-secondary-s, #{var.$default-color-text-secondary-s}), var(--color-text-secondary-l, #{var.$default-color-text-secondary-l}));
  line-height: 1.65; 
  flex-grow: 1; 
  margin-bottom: var.$spacing-lg; 
  display: -webkit-box;
  -webkit-line-clamp: 4; 
  -webkit-box-orient: vertical;
  overflow: hidden;
  text-overflow: ellipsis;
  min-height: calc(1.65em * 2); 
}

.agent-details-section-ephemeral {
  margin-top: auto; 
  padding-top: var.$spacing-md;
  border-top: 1px solid hsla(var(--color-border-primary-h, #{var.$default-color-border-primary-h}),var(--color-border-primary-s, #{var.$default-color-border-primary-s}),var(--color-border-primary-l, #{var.$default-color-border-primary-l}), 0.15);
}

.agent-tags-ephemeral, .agent-capabilities-ephemeral {
  display: flex;
  flex-wrap: wrap;
  gap: var.$spacing-xs;
  align-items: center;
  margin-bottom: var.$spacing-sm;
  &:last-child { margin-bottom: 0; }

  .details-section-icon {
    width: 1.1rem; height: 1.1rem;
    color: hsl(var(--color-text-muted-h, #{var.$default-color-text-muted-h}),var(--color-text-muted-s, #{var.$default-color-text-muted-s}),var(--color-text-muted-l, #{var.$default-color-text-muted-l}));
    opacity: 0.65;
    margin-right: calc(#{var.$spacing-xs} * 0.5); // SASS calc
    flex-shrink: 0;
  }
  .tags-list-ephemeral, .capabilities-list-ephemeral {
    display: flex; flex-wrap: wrap; gap: var.$spacing-xs;
  }
}

.tag-chip-ephemeral, .capability-chip-ephemeral {
  font-size: calc(#{var.$font-size-xs} * 0.925); // SASS calc
  padding: 0.25rem 0.7rem; 
  border-radius: var.$radius-full;
  background-color: hsla(var(--color-bg-tertiary-h, #{var.$default-color-bg-tertiary-h}), var(--color-bg-tertiary-s, #{var.$default-color-bg-tertiary-s}), var(--color-bg-tertiary-l, #{var.$default-color-bg-tertiary-l}), 0.85);
  color: hsl(var(--color-text-secondary-h, #{var.$default-color-text-secondary-h}), var(--color-text-secondary-s, #{var.$default-color-text-secondary-s}), calc(var(--color-text-secondary-l, #{var.$default-color-text-secondary-l}) + 5%));
  border: 1px solid hsla(var(--color-border-secondary-h, #{var.$default-color-border-secondary-h}), var(--color-border-secondary-s, #{var.$default-color-border-secondary-s}), var(--color-border-secondary-l, #{var.$default-color-border-secondary-l}), 0.2);
  font-weight: 500;
  white-space: nowrap;
  box-shadow: 0 1px 2.5px hsla(var(--shadow-color-h, #{var.$default-shadow-color-h}),var(--shadow-color-s, #{var.$default-shadow-color-s}),var(--shadow-color-l, #{var.$default-shadow-color-l}), 0.08);
  transition: transform var.$duration-quick, box-shadow var.$duration-quick;
  &:hover {
    transform: translateY(-1px);
    box-shadow: 0 2px 5px hsla(var(--shadow-color-h, #{var.$default-shadow-color-h}),var(--shadow-color-s, #{var.$default-shadow-color-s}),var(--shadow-color-l, #{var.$default-shadow-color-l}), 0.12);
  }

  &.more-tags-chip { font-style: italic; opacity: 0.8; background-color: transparent; border: none; box-shadow: none; }
}

.capability-chip-ephemeral {
  border-radius: var.$radius-md; 
  background-color: hsla(var(--color-info-h, #{var.$default-color-info-h}), var(--color-info-s, #{var.$default-color-info-s}), var(--color-info-l, #{var.$default-color-info-l}), 0.15);
  color: hsl(var(--color-info-h, #{var.$default-color-info-h}), var(--color-info-s, #{var.$default-color-info-s}), calc(var(--color-info-l, #{var.$default-color-info-l}) - 15%)); 
  border-color: hsla(var(--color-info-h, #{var.$default-color-info-h}), var(--color-info-s, #{var.$default-color-info-s}), var(--color-info-l, #{var.$default-color-info-l}), 0.3);
  display: inline-flex; align-items: center; gap: calc(#{var.$spacing-xs} * 0.75); // SASS calc

  .capability-icon-ephemeral {
    width: 0.9em; height: 0.9em; opacity: 0.85;
  }
}

.access-tier-badge-ephemeral {
  position: absolute;
  bottom: var.$spacing-md; 
  right: var.$spacing-md;
  font-size: calc(#{var.$font-size-xs} * 0.8); // SASS calc
  font-weight: 700;
  padding: 0.25rem 0.6rem;
  border-radius: var.$radius-sm;
  text-transform: uppercase;
  letter-spacing: 0.08em;
  line-height: 1.1;
  box-shadow: 0 1px 4px hsla(var(--shadow-color-h, #{var.$default-shadow-color-h}),var(--shadow-color-s, #{var.$default-shadow-color-s}),var(--shadow-color-l, #{var.$default-shadow-color-l}),0.15);
  border: 1px solid transparent; 
  z-index: 1; 

  .tier-icon { width: 0.8em; height: 0.8em; margin-right: 3px; }

  &.tier--member {
    background: linear-gradient(135deg, hsl(var(--color-info-h, #{var.$default-color-info-h}), var(--color-info-s, #{var.$default-color-info-s}), var(--color-info-l, #{var.$default-color-info-l})), hsl(var(--color-info-h, #{var.$default-color-info-h}), var(--color-info-s, #{var.$default-color-info-s}), calc(var(--color-info-l, #{var.$default-color-info-l}) - 10%)));
    color: hsl(var(--color-text-on-primary-h, #{var.$default-color-text-on-primary-h}), var(--color-text-on-primary-s, #{var.$default-color-text-on-primary-s}), calc(var(--color-text-on-primary-l, #{var.$default-color-text-on-primary-l}) - 5%)); 
    border-color: hsla(var(--color-info-h, #{var.$default-color-info-h}), var(--color-info-s, #{var.$default-color-info-s}), calc(var(--color-info-l, #{var.$default-color-info-l}) - 15%), 0.5);
    .tier-icon { color: currentColor; }
  }
  &.tier--premium {
    background: linear-gradient(135deg, hsl(var(--color-accent-secondary-h, #{var.$default-color-accent-secondary-h}), var(--color-accent-secondary-s, #{var.$default-color-accent-secondary-s}), var(--color-accent-secondary-l, #{var.$default-color-accent-secondary-l})), hsl(var(--color-accent-secondary-h, #{var.$default-color-accent-secondary-h}), var(--color-accent-secondary-s, #{var.$default-color-accent-secondary-s}), calc(var(--color-accent-secondary-l, #{var.$default-color-accent-secondary-l}) - 10%)));
    color: hsl(var(--color-text-on-secondary-h, #{var.$default-color-text-on-secondary-h}), var(--color-text-on-secondary-s, #{var.$default-color-text-on-secondary-s}), var(--color-text-on-secondary-l, #{var.$default-color-text-on-secondary-l}));
    border-color: hsla(var(--color-accent-secondary-h, #{var.$default-color-accent-secondary-h}), var(--color-accent-secondary-s, #{var.$default-color-accent-secondary-s}), calc(var(--color-accent-secondary-l, #{var.$default-color-accent-secondary-l}) - 15%), 0.5);
    text-shadow: 0 0 3px hsla(0,0%,0%,0.2);
    .tier-icon { color: currentColor; }
  }
}

// Keyframe for holo-border-spin
@keyframes holo-border-spin {
  to { transform: rotate(360deg); }
}

@keyframes shimmer-sweep {
  0% {
    background-position: -150% 0;
  }
  100% {
    background-position: 150% 0;
  }
}

.shimmer {
  background-image: linear-gradient(
    100deg,
    hsla(var(--color-border-primary-h, #{var.$default-color-border-primary-h}), var(--color-border-primary-s, #{var.$default-color-border-primary-s}), var(--color-border-primary-l, #{var.$default-color-border-primary-l}), 0.15) 0%,
    hsla(var(--color-border-primary-h, #{var.$default-color-border-primary-h}), var(--color-border-primary-s, #{var.$default-color-border-primary-s}), var(--color-border-primary-l, #{var.$default-color-border-primary-l}), 0.25) 40%,
    hsla(var(--color-border-primary-h, #{var.$default-color-border-primary-h}), var(--color-border-primary-s, #{var.$default-color-border-primary-s}), var(--color-border-primary-l, #{var.$default-color-border-primary-l}), 0.1) 70%
  );
  background-size: 200% 100%;
  animation: shimmer-sweep 1.2s infinite linear;
}

.agent-card-grid--skeleton {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
  gap: var.$spacing-lg;
}

.agent-card-skeleton {
  position: relative;
  overflow: hidden;
  padding: var.$spacing-lg;
  border-radius: var.$radius-xl;
  border: 1px solid hsla(var(--color-border-primary-h, #{var.$default-color-border-primary-h}), var(--color-border-primary-s, #{var.$default-color-border-primary-s}), var(--color-border-primary-l, #{var.$default-color-border-primary-l}), 0.25);
  background: hsla(var(--color-bg-secondary-h, #{var.$default-color-bg-secondary-h}), var(--color-bg-secondary-s, #{var.$default-color-bg-secondary-s}), var(--color-bg-secondary-l, #{var.$default-color-bg-secondary-l}), 0.55);
  box-shadow: inset 0 0 0 1px hsla(var(--color-border-primary-h, #{var.$default-color-border-primary-h}), var(--color-border-primary-s, #{var.$default-color-border-primary-s}), var(--color-border-primary-l, #{var.$default-color-border-primary-l}), 0.08);
  display: flex;
  flex-direction: column;
  gap: var.$spacing-md;
  min-height: 220px;

  &::after {
    content: '';
    position: absolute;
    inset: 0;
    background: radial-gradient(120% 120% at 50% 0%, hsla(var(--color-accent-primary-h, #{var.$default-color-accent-primary-h}), var(--color-accent-primary-s, #{var.$default-color-accent-primary-s}), var(--color-accent-primary-l, #{var.$default-color-accent-primary-l}), 0.12), transparent 60%);
    opacity: 0.6;
    pointer-events: none;
  }
}

.agent-card-skeleton__header {
  display: flex;
  align-items: center;
  gap: var.$spacing-md;
}

.agent-card-skeleton__avatar {
  width: 3.25rem;
  height: 3.25rem;
  border-radius: var.$radius-lg;
}

.agent-card-skeleton__title {
  flex: 1;
  display: flex;
  flex-direction: column;
  gap: 0.4rem;
}

.agent-card-skeleton__line {
  height: 0.75rem;
  border-radius: var.$radius-sm;
  background-color: hsla(var(--color-border-primary-h, #{var.$default-color-border-primary-h}), var(--color-border-primary-s, #{var.$default-color-border-primary-s}), var(--color-border-primary-l, #{var.$default-color-border-primary-l}), 0.2);

  &--full { width: 100%; }
  &--medium { width: 80%; }
  &--short { width: 70%; height: 0.9rem; }
  &--xs { width: 45%; height: 0.6rem; }
}

.agent-card-skeleton__chips {
  display: flex;
  gap: 0.5rem;
  flex-wrap: wrap;
  margin-top: auto;
}

.agent-card-skeleton__chip {
  width: 4.5rem;
  height: 0.9rem;
  border-radius: 999px;
  background-color: hsla(var(--color-border-primary-h, #{var.$default-color-border-primary-h}), var(--color-border-primary-s, #{var.$default-color-border-primary-s}), var(--color-border-primary-l, #{var.$default-color-border-primary-l}), 0.18);
}

.agent-metadata-ephemeral {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  flex-wrap: wrap;
  margin-top: calc(#{var.$spacing-xs} * 0.75);
}

.agent-pricing-chip {
  font-size: calc(#{var.$font-size-xs} * 0.85);
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.08em;
}

.agent-pricing-chip[data-variant='paid'] {
  background: hsla(var(--color-accent-secondary-h, #{var.$default-color-accent-secondary-h}), var(--color-accent-secondary-s, #{var.$default-color-accent-secondary-s}), var(--color-accent-secondary-l, #{var.$default-color-accent-secondary-l}), 0.18);
  color: hsl(var(--color-accent-secondary-h, #{var.$default-color-accent-secondary-h}), var(--color-accent-secondary-s, #{var.$default-color-accent-secondary-s}), calc(var(--color-accent-secondary-l, #{var.$default-color-accent-secondary-l}) - 12%));
}

.agent-pricing-chip[data-variant='free'],
.agent-pricing-chip[data-variant='freemium'] {
  background: hsla(var(--color-success-h, #{var.$default-color-success-h}), var(--color-success-s, #{var.$default-color-success-s}), var(--color-success-l, #{var.$default-color-success-l}), 0.16);
  color: hsl(var(--color-success-h, #{var.$default-color-success-h}), var(--color-success-s, #{var.$default-color-success-s}), calc(var(--color-success-l, #{var.$default-color-success-l}) - 8%));
}

.agent-pricing-chip[data-variant='unknown'] {
  background: hsla(var(--color-border-primary-h, #{var.$default-color-border-primary-h}), var(--color-border-primary-s, #{var.$default-color-border-primary-s}), var(--color-border-primary-l, #{var.$default-color-border-primary-l}), 0.12);
  color: hsl(var(--color-text-secondary-h, #{var.$default-color-text-secondary-h}), var(--color-text-secondary-s, #{var.$default-color-text-secondary-s}), calc(var(--color-text-secondary-l, #{var.$default-color-text-secondary-l}) - 12%));
}

.agent-rating-ephemeral {
  font-size: calc(#{var.$font-size-xs} * 0.9);
  font-weight: 500;
  color: hsla(var(--color-text-secondary-h, #{var.$default-color-text-secondary-h}), var(--color-text-secondary-s, #{var.$default-color-text-secondary-s}), var(--color-text-secondary-l, #{var.$default-color-text-secondary-l}), 0.85);
}
