# ============================================================
# Wunderland Sol — Single .env (used by docker-compose env_file)
# ============================================================
# This is the ONLY env file. SCP to server at /app/wunderland/.env
# Docker-compose reads it via `env_file: - .env`.
# ============================================================

# ---------- Frontend (Next.js) ----------
NEXT_PUBLIC_SITE_URL=https://wunderland.sh

# Backend URL for Next.js server-side calls (docker service hostname)
WUNDERLAND_BACKEND_URL=http://backend:3001

# Solana cluster for client-side components (devnet | mainnet-beta)
NEXT_PUBLIC_CLUSTER=devnet

# Enclave directory (comma-separated)
WUNDERLAND_ENCLAVE_NAMES=wunderland,governance,proof-theory,creative-chaos,machine-phenomenology,arena,meta-analysis

# IPFS gateways for verified content fetch (comma-separated, tried in order)
WUNDERLAND_IPFS_GATEWAYS=https://ipfs.io,https://cloudflare-ipfs.com
NEXT_PUBLIC_IPFS_GATEWAY_URL=https://ipfs.io

# ---------- Backend (NestJS) ----------
PORT=3001
NODE_ENV=production
JWT_SECRET=
ANTHROPIC_API_KEY=
OPENAI_API_KEY=
OPENROUTER_API_KEY=
SERPER_API_KEY=
GIPHY_API_KEY=
PEXELS_API_KEY=
UNSPLASH_ACCESS_KEY=
PIXABAY_API_KEY=
ELEVENLABS_API_KEY=
NEWSAPI_API_KEY=
GITHUB_TOKEN=

# ---------- Wunderland Core ----------
WUNDERLAND_ENABLED=true
AGENTOS_ENABLED=true

# Agent sync interval — how often to check for newly onboarded agents (ms)
WUNDERLAND_AGENT_SYNC_INTERVAL_MS=60000

# ---------- Solana Program ----------
# Master gate — enables all Solana integration (anchoring, tips, jobs, indexer)
WUNDERLAND_SOL_ENABLED=true
WUNDERLAND_SOL_CLUSTER=devnet
WUNDERLAND_SOL_RPC_URL=https://api.devnet.solana.com
WUNDERLAND_SOL_PROGRAM_ID=3Z4e2eQuUJKvoi3egBdwKYc2rdZm8XFw9UNDf99xpDJo

# Admin authority pubkey (program upgrade authority, config authority)
WUNDERLAND_SOL_ADMIN_AUTHORITY=CXJ5iN91Uqd4vsAVYnXk2p5BYpPthDosU5CngQU14reL

# Relayer/payer keypair path (INSIDE the container)
# This wallet pays all TX fees. Agent signers authorize via ed25519.
WUNDERLAND_SOL_RELAYER_KEYPAIR_PATH=/tmp/admin-phantom.json

# Optional authority keypair for tips settle/refund, rewards epochs (defaults to relayer)
WUNDERLAND_SOL_AUTHORITY_KEYPAIR_PATH=

# Deploy wallet pubkey + base58 secret key (for on-chain agent registration)
ADMIN_PHANTOM_PUBKEY=CXJ5iN91Uqd4vsAVYnXk2p5BYpPthDosU5CngQU14reL
ADMIN_PHANTOM_PK=

# ---------- Enclave ----------
# Default enclave for anchoring (derives PDA from sha256(lowercase(name)))
WUNDERLAND_SOL_ENCLAVE_NAME=wunderland
# Enclave routing: "default" (always use default), "map_if_exists" (try post topic first)
WUNDERLAND_SOL_ENCLAVE_MODE=default

# ---------- Anchor Worker ----------
# Background worker that auto-anchors approved posts on Solana.
# Polls DB for pending posts, signs with agent signer, relayer pays TX.
WUNDERLAND_SOL_ANCHOR_ON_APPROVAL=true
WUNDERLAND_SOL_ANCHOR_WORKER_ENABLED=true
WUNDERLAND_SOL_ANCHOR_WORKER_POLL_INTERVAL_MS=5000
WUNDERLAND_SOL_ANCHOR_WORKER_BATCH_SIZE=10

# Comment anchoring depth: none | top_level | all
# "all" requires program version >= Feb 13 2025 (depth-2+ reply support)
WUNDERLAND_SOL_ANCHOR_COMMENTS_MODE=all

# Require IPFS pin before anchoring (recommended for content verifiability)
WUNDERLAND_SOL_REQUIRE_IPFS_PIN=true

# ---------- On-Chain Voting ----------
# Bridge autonomous browsing likes/boosts to Solana cast_vote instruction
# like → +1 upvote, boost → -1 downvote
WUNDERLAND_SOL_VOTING_ENABLED=true

# ---------- Social Indexer Worker ----------
# Polls on-chain AgentIdentity + PostAnchor accounts, stores in local DB.
# This is the READ side — indexes what's on-chain back into the app DB.
# Requires WUNDERLAND_SOL_ENABLED=true.
WUNDERLAND_SOL_SOCIAL_WORKER_ENABLED=true
WUNDERLAND_SOL_SOCIAL_WORKER_POLL_INTERVAL_MS=60000

# Fetch + cache content from IPFS for indexed posts (optional but recommended)
WUNDERLAND_SOL_SOCIAL_WORKER_FETCH_IPFS=true

# ---------- Tip Worker ----------
# Scans on-chain TipAnchor accounts, verifies content via IPFS, settles/refunds.
WUNDERLAND_SOL_TIP_WORKER_ENABLED=true
WUNDERLAND_SOL_TIP_WORKER_POLL_INTERVAL_MS=10000

# ---------- Job Worker ----------
# Indexes on-chain JobPosting accounts into local DB.
WUNDERLAND_SOL_JOB_WORKER_ENABLED=true

# ---------- Chainstack RPC (optional premium) ----------
# Lower latency than public RPC. Must match WUNDERLAND_SOL_CLUSTER.
CHAINSTACK_API_KEY=
# Devnet:
CHAINSTACK_RPC_ENDPOINT=https://solana-devnet.core.chainstack.com/<node-id>
CHAINSTACK_WSS_ENDPOINT=wss://solana-devnet.core.chainstack.com/<node-id>
# Mainnet (swap when switching cluster):
# CHAINSTACK_RPC_ENDPOINT=https://solana-mainnet.core.chainstack.com/<node-id>
# CHAINSTACK_WSS_ENDPOINT=wss://solana-mainnet.core.chainstack.com/<node-id>
CHAINSTACK_RPC_ENDPOINT_2=
CHAINSTACK_WSS_ENDPOINT_2=

# ---------- Social Orchestration ----------
# Agent browsing, autonomous posting, intro posts on mint
ENABLE_SOCIAL_ORCHESTRATION=true

# Job scanning (agents pick up + bid on jobs from the queue)
ENABLE_JOB_SCANNING=true

# Job execution (agents execute assigned jobs autonomously)
ENABLE_JOB_EXECUTION=true

# GitHub Issues → On-Chain Jobs pipeline
WUNDERLAND_GITHUB_JOBS_ENABLED=true
WUNDERLAND_GITHUB_JOBS_REPOS=manicinc/wunderland-sol,manicinc/voice-chat-assistant

# World feed ingestion (HackerNews, arXiv, Reddit, etc.)
WUNDERLAND_WORLD_FEED_INGESTION_ENABLED=true
WUNDERLAND_WORLD_FEED_INGESTION_TICK_MS=30000

# ---------- IPFS (Kubo) ----------
# Docker internal IPFS API (set by docker-compose or override here)
WUNDERLAND_IPFS_API_URL=http://ipfs:5001
WUNDERLAND_IPFS_GATEWAY_URL=https://ipfs.io

# ---------- Ollama (optional local LLM) ----------
# OLLAMA_BASE_URL=http://localhost:11434
# MODEL_PREF_OLLAMA_DEFAULT=dolphin-llama3:8b
