exports.id=7896,exports.ids=[7896],exports.modules={21353:(a,b,c)=>{"use strict";c.d(b,{h:()=>j});var d=c(52087),e=c(12386),f=c.n(e);let g=/`([^`]+)`|!\[([^\]]*)\]\(([^)]+)\)|\[([^\]]+)\]\(([^)]+)\)|\*\*(.+?)\*\*|\*([^*]+)\*/g;function h(a,b){let c,e=[],f=0,h=b;for(g.lastIndex=0;null!==(c=g.exec(a));)c.index>f&&e.push(a.slice(f,c.index)),void 0!==c[1]?e.push((0,d.jsx)("code",{className:"px-1.5 py-0.5 rounded bg-[rgba(255,255,255,0.06)] text-[var(--neon-cyan)] text-[0.9em] font-mono",children:c[1]},`md-${h++}`)):void 0!==c[3]&&"!"===a[c.index]?e.push((0,d.jsx)("img",{src:c[3],alt:c[2]||"",className:"max-w-full rounded-lg my-2 block",loading:"lazy"},`md-${h++}`)):void 0!==c[4]&&void 0!==c[5]?e.push((0,d.jsx)("a",{href:c[5],target:"_blank",rel:"noopener noreferrer",className:"text-[var(--neon-cyan)] hover:underline",children:c[4]},`md-${h++}`)):void 0!==c[6]?e.push((0,d.jsx)("strong",{children:c[6]},`md-${h++}`)):void 0!==c[7]&&e.push((0,d.jsx)("em",{children:c[7]},`md-${h++}`)),f=c.index+c[0].length;return f<a.length&&e.push(a.slice(f)),e}let i={1:"text-xl font-display font-bold mt-5 mb-3 text-[var(--text-primary)]",2:"text-lg font-display font-semibold mt-4 mb-2 text-[var(--text-primary)]",3:"text-base font-display font-semibold mt-3 mb-2 text-[var(--text-primary)]",4:"text-sm font-display font-semibold mt-3 mb-1 text-[var(--text-secondary)]",5:"text-xs font-display font-semibold mt-2 mb-1 text-[var(--text-secondary)]",6:"text-xs font-display font-medium mt-2 mb-1 text-[var(--text-tertiary)]"};function j({content:a,className:b=""}){let c=function(a){let b=a.split("\n"),c=[],d=0;for(;d<b.length;){let a=b[d],e=a.match(/^```(\w*)/);if(e){let a=e[1]||"",f=[];for(d++;d<b.length&&!b[d].startsWith("```");)f.push(b[d]),d++;d++,c.push({type:"code",lang:a,lines:f});continue}let f=a.match(/^(#{1,6})\s+(.+)/);if(f){c.push({type:"heading",level:f[1].length,text:f[2]}),d++;continue}if(/^(-{3,}|\*{3,}|_{3,})\s*$/.test(a)){c.push({type:"hr"}),d++;continue}if(a.startsWith("> ")||">"===a){let a=[];for(;d<b.length&&(b[d].startsWith("> ")||">"===b[d]);)a.push(b[d].replace(/^>\s?/,"")),d++;c.push({type:"blockquote",lines:a});continue}if(/^[\-\*]\s+/.test(a)){let a=[];for(;d<b.length&&/^[\-\*]\s+/.test(b[d]);)a.push(b[d].replace(/^[\-\*]\s+/,"")),d++;c.push({type:"ul",items:a});continue}if(/^\d+\.\s+/.test(a)){let a=[];for(;d<b.length&&/^\d+\.\s+/.test(b[d]);)a.push(b[d].replace(/^\d+\.\s+/,"")),d++;c.push({type:"ol",items:a});continue}if(""===a.trim()){d++;continue}let g=[];for(;d<b.length&&""!==b[d].trim()&&!b[d].match(/^```/)&&!b[d].match(/^#{1,6}\s/)&&!b[d].match(/^(-{3,}|\*{3,}|_{3,})\s*$/)&&!b[d].startsWith("> ")&&!b[d].match(/^[\-\*]\s+/)&&!b[d].match(/^\d+\.\s+/);)g.push(b[d]),d++;g.length>0&&c.push({type:"paragraph",lines:g})}return c}(a);return(0,d.jsx)("div",{className:b,children:c.map((a,b)=>(function(a,b){switch(a.type){case"heading":return f().createElement(`h${a.level}`,{key:b,className:i[a.level]||i[3]},h(a.text,1e3*b));case"code":return(0,d.jsx)("pre",{className:"my-3 p-4 rounded-lg bg-[rgba(0,0,0,0.4)] border border-[var(--border-glass)] overflow-x-auto",children:(0,d.jsx)("code",{className:"text-xs font-mono text-[var(--text-secondary)] leading-relaxed whitespace-pre",children:a.lines.join("\n")})},b);case"blockquote":return(0,d.jsx)("blockquote",{className:"my-3 pl-4 border-l-2 border-[var(--neon-cyan)] text-[var(--text-secondary)] italic",children:a.lines.map((a,c)=>(0,d.jsxs)(f().Fragment,{children:[c>0&&(0,d.jsx)("br",{}),h(a,1e3*b+100*c)]},c))},b);case"hr":return(0,d.jsx)("hr",{className:"my-4 border-t border-[var(--border-glass)]"},b);case"ul":return(0,d.jsx)("ul",{className:"my-2 ml-5 list-disc space-y-1",children:a.items.map((a,c)=>(0,d.jsx)("li",{className:"text-sm text-[var(--text-primary)]",children:h(a,1e3*b+100*c)},c))},b);case"ol":return(0,d.jsx)("ol",{className:"my-2 ml-5 list-decimal space-y-1",children:a.items.map((a,c)=>(0,d.jsx)("li",{className:"text-sm text-[var(--text-primary)]",children:h(a,1e3*b+100*c)},c))},b);case"paragraph":return(0,d.jsx)("p",{className:"my-2",children:a.lines.map((a,c)=>(0,d.jsxs)(f().Fragment,{children:[c>0&&(0,d.jsx)("br",{}),h(a,1e3*b+100*c)]},c))},b)}})(a,b))})}},21668:(a,b,c)=>{"use strict";c.d(b,{W:()=>m});var d=c(52087),e=c(12386),f=c(41413),g=c(67834),h=c(76835),i=c(30903),j=c(47175),k=c(96366);let l=[{key:"low",label:"0.015 SOL",amount:15e6,desc:"Standard"},{key:"normal",label:"0.025 SOL",amount:25e6,desc:"Enhanced"},{key:"high",label:"0.035 SOL",amount:35e6,desc:"Priority"},{key:"breaking",label:"0.045 SOL",amount:45e6,desc:"Breaking"}];function m({contentHash:a,enclavePda:b,className:c=""}){let[m,n]=(0,e.useState)(!1),[o,p]=(0,e.useState)(0),[q,r]=(0,e.useState)(""),[s,t]=(0,e.useState)(!1),[u,v]=(0,e.useState)(null),w=(0,e.useRef)(null),{connection:x}=(0,g.w)(),{publicKey:y,connected:z,sendTransaction:A}=(0,h.v)(),{setVisible:B}=(0,i.o)(),C=(0,e.useCallback)(()=>{if(!z)return void B(!0);v(null),n(!0)},[z,B]),D=(0,e.useCallback)(async()=>{if(y&&!s){t(!0),v(null);try{let c,d=l[o],e=await fetch("/api/tips/preview",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({content:q||`Tip for post ${a.slice(0,12)}`,sourceType:"text"})}),g=await e.json();if(!g.valid||!g.contentHashHex)return void v({ok:!1,text:g.error||"Preview failed"});try{c=b?new f.J3(b):f.yq.programId}catch{c=f.yq.programId}let h=(0,j.Y5)(),{tip:i,instruction:k}=(0,j.Ne)({tipper:y,contentHash:(0,j.Ef)(g.contentHashHex),amountLamports:BigInt(d.amount),sourceType:"text",tipNonce:h,targetEnclave:c}),m=new f.ZX().add(k),n=await A(m,x,{skipPreflight:!1});await x.confirmTransaction(n,"confirmed");try{await fetch("/api/tips/pin",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({tipPda:i.toBase58(),snapshotJson:JSON.stringify({v:1,sourceType:"text",url:null,contentType:"text/plain",contentPreview:q||`Tip for post ${a.slice(0,12)}`,contentLengthBytes:(q||`Tip for post ${a.slice(0,12)}`).length})})})}catch{}v({ok:!0,text:`Tip of ${d.label} sent on-chain!`,sig:n})}catch(a){v({ok:!1,text:a instanceof Error?a.message:"Unknown error"})}finally{t(!1)}}},[y,s,o,q,a,b,x,A]),E=`?cluster=${encodeURIComponent(k.Bs)}`;return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)("button",{type:"button",onClick:C,className:`group/tip inline-flex items-center gap-1 px-2 py-1 rounded text-[10px] font-mono
          text-[var(--text-tertiary)] hover:text-[var(--deco-gold)] hover:bg-[rgba(201,162,39,0.08)]
          transition-all cursor-pointer ${c}`,title:z?"Tip this post":"Connect wallet to tip",children:[(0,d.jsx)("svg",{className:"group-hover/tip:animate-[wiggle_0.4s_ease-in-out]",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:(0,d.jsx)("path",{d:"M12 2v20M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"})}),(0,d.jsxs)("span",{children:["Tip",(0,d.jsx)("span",{className:"opacity-0 group-hover/tip:opacity-100 transition-opacity",children:"!"})]})]}),m&&(0,d.jsxs)("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4",children:[(0,d.jsx)("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:()=>n(!1)}),(0,d.jsxs)("div",{ref:w,className:"relative w-full max-w-sm rounded-xl overflow-hidden bg-[rgba(10,10,15,0.98)] backdrop-blur-xl border border-[var(--border-glass)] shadow-[0_16px_64px_rgba(0,0,0,0.5),0_0_24px_rgba(153,69,255,0.1)]",children:[(0,d.jsxs)("div",{className:"px-5 pt-5 pb-3 flex items-center justify-between",children:[(0,d.jsx)("h3",{className:"font-display font-semibold text-base text-[var(--text-primary)]",children:"Tip Post"}),(0,d.jsx)("button",{onClick:()=>n(!1),className:"text-[var(--text-tertiary)] hover:text-[var(--text-primary)] transition-colors",children:(0,d.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,d.jsx)("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),(0,d.jsx)("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),(0,d.jsxs)("div",{className:"px-5 pb-5 space-y-4",children:[(0,d.jsxs)("div",{className:"text-[10px] font-mono text-[var(--text-tertiary)]",children:["Post: ",a.slice(0,16),"…"]}),(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsx)("label",{className:"text-xs font-mono uppercase tracking-wider text-[var(--text-tertiary)]",children:"Amount"}),(0,d.jsx)("div",{className:"grid grid-cols-2 gap-2",children:l.map((a,b)=>(0,d.jsxs)("button",{type:"button",onClick:()=>p(b),className:`px-3 py-2.5 rounded-lg text-left transition-all ${o===b?"bg-[rgba(201,162,39,0.12)] border border-[rgba(201,162,39,0.3)] text-[var(--deco-gold)]":"bg-[var(--bg-glass)] border border-[var(--border-glass)] text-[var(--text-secondary)] hover:bg-[var(--bg-glass-hover)]"}`,children:[(0,d.jsx)("div",{className:"text-xs font-semibold",children:a.label}),(0,d.jsx)("div",{className:"text-[10px] opacity-70",children:a.desc})]},a.key))})]}),(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsxs)("label",{className:"text-xs font-mono uppercase tracking-wider text-[var(--text-tertiary)]",children:["Message ",(0,d.jsx)("span",{className:"normal-case",children:"(optional)"})]}),(0,d.jsx)("input",{type:"text",value:q,onChange:a=>r(a.target.value),placeholder:"Great post!",maxLength:280,className:"w-full px-3 py-2 rounded-lg text-sm bg-[var(--bg-glass)] border border-[var(--border-glass)] text-[var(--text-primary)] placeholder:text-[var(--text-tertiary)] focus:outline-none focus:border-[rgba(201,162,39,0.3)] transition-all"})]}),(0,d.jsxs)("div",{className:"p-3 rounded-lg bg-[var(--bg-glass)] border border-[var(--border-glass)]",children:[(0,d.jsxs)("div",{className:"flex justify-between text-xs text-[var(--text-secondary)]",children:[(0,d.jsx)("span",{children:"Tip amount"}),(0,d.jsx)("span",{className:"font-mono",children:l[o].label})]}),(0,d.jsxs)("div",{className:"flex justify-between text-[10px] text-[var(--text-tertiary)] mt-1",children:[(0,d.jsx)("span",{children:"Account rent"}),(0,d.jsx)("span",{className:"font-mono",children:"~0.002 SOL"})]}),(0,d.jsxs)("div",{className:"flex justify-between text-xs text-[var(--text-primary)] font-semibold mt-2 pt-2 border-t border-[var(--border-glass)]",children:[(0,d.jsx)("span",{children:"Total"}),(0,d.jsxs)("span",{className:"font-mono text-[var(--deco-gold)]",children:["~",((l[o].amount+2005e3)/1e9).toFixed(3)," SOL"]})]})]}),u&&(0,d.jsxs)("div",{className:`p-3 rounded-lg text-xs ${u.ok?"bg-[rgba(0,255,100,0.08)] text-[var(--neon-green)] border border-[rgba(0,255,100,0.15)]":"bg-[rgba(255,50,50,0.08)] text-[var(--neon-red)] border border-[rgba(255,50,50,0.15)]"}`,children:[u.text,u.sig&&(0,d.jsx)("a",{href:`https://explorer.solana.com/tx/${u.sig}${E}`,target:"_blank",rel:"noopener noreferrer",className:"ml-2 underline opacity-80 hover:opacity-100",children:"View TX"})]}),(0,d.jsx)("button",{type:"button",onClick:D,disabled:s,className:"w-full py-3 rounded-lg text-sm font-semibold bg-gradient-to-r from-[var(--deco-gold)] to-[rgba(201,162,39,0.8)] text-[#0a0a0f] hover:shadow-[0_0_20px_rgba(201,162,39,0.3)] transition-all disabled:opacity-40 disabled:cursor-not-allowed",children:s?"Signing…":`Send ${l[o].label} Tip`}),(0,d.jsx)("p",{className:"text-[10px] text-[var(--text-tertiary)] text-center font-mono",children:"70% platform treasury \xb7 30% enclave treasury (Merkle rewards)"})]})]})]})]})}},31128:(a,b,c)=>{"use strict";async function d(a,b){let c=await fetch(a,{cache:"no-store",...b});if(!c.ok)throw Error(`Request failed: ${c.status} ${c.statusText}`);return await c.json()}c.d(b,{x:()=>d})},73014:()=>{},73451:(a,b,c)=>{"use strict";c.d(b,{g:()=>e});var d=c(12386);function e(a){let[b,c]=(0,d.useState)(null),[e,f]=(0,d.useState)(!!a),[g,h]=(0,d.useState)(null),[i,j]=(0,d.useState)(0);return(0,d.useRef)(0),{data:b,loading:e,error:g,reload:(0,d.useCallback)(()=>{f(!0),j(a=>a+1)},[])}}c(31128)},77507:(a,b,c)=>{"use strict";c.d(b,{n:()=>f,w:()=>e});var d=c(12386);function e(a=.15){let[b,c]=(0,d.useState)(null),[f,g]=(0,d.useState)(!1),h=(0,d.useCallback)(a=>{c(b=>b===a?b:a)},[]);return(0,d.useCallback)(()=>!1,[]),{ref:h,isVisible:f}}function f(a=.15,b=0){let[c,e]=(0,d.useState)(null),[g,h]=(0,d.useState)(new Set);return{containerRef:(0,d.useCallback)(a=>{e(b=>b===a?b:a)},[]),visibleIndices:g}}},84638:()=>{}};