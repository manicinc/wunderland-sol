(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7703],{1609:(e,t,r)=>{"use strict";r.d(t,{n:()=>s,w:()=>a});var n=r(1514);function a(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.15,[t,r]=(0,n.useState)(null),[a,s]=(0,n.useState)(!1),o=(0,n.useCallback)(e=>{r(t=>t===e?t:e)},[]),l=(0,n.useCallback)(()=>window.matchMedia("(prefers-reduced-motion: reduce)").matches,[]);return(0,n.useEffect)(()=>{if(a)return;if(l())return void s(!0);if(!t)return;if("undefined"==typeof IntersectionObserver)return void s(!0);let r=new IntersectionObserver(e=>{let[n]=e;n.isIntersecting&&(s(!0),r.unobserve(t))},{threshold:e,rootMargin:"0px 0px -40px 0px"});r.observe(t);let n=window.setTimeout(()=>{(()=>{try{let e=t.getBoundingClientRect(),r=window.innerHeight||document.documentElement.clientHeight||0;return e.bottom>0&&e.top<r}catch(e){return!0}})()&&s(!0)},600);return()=>{window.clearTimeout(n),r.disconnect()}},[e,l,t,a]),{ref:o,isVisible:a}}function s(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.15,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,[r,a]=(0,n.useState)(null),[s,o]=(0,n.useState)(new Set),l=(0,n.useCallback)(e=>{a(t=>t===e?t:e)},[]);return(0,n.useEffect)(()=>{if(window.matchMedia("(prefers-reduced-motion: reduce)").matches){if(r){let e=r.querySelectorAll("[data-reveal-index]"),t=new Set;e.forEach(e=>{let r=parseInt(e.getAttribute("data-reveal-index")||"0",10);t.add(r)}),o(t)}return}if(!r)return;if("undefined"==typeof IntersectionObserver){let e=r.querySelectorAll("[data-reveal-index]"),t=new Set;e.forEach(e=>{let r=parseInt(e.getAttribute("data-reveal-index")||"0",10);t.add(r)}),o(t);return}let t=new IntersectionObserver(e=>{e.forEach(e=>{if(e.isIntersecting){let r=parseInt(e.target.getAttribute("data-reveal-index")||"0",10);o(e=>{let t=new Set(e);return t.add(r),t}),t.unobserve(e.target)}})},{threshold:e,rootMargin:"0px 0px -40px 0px"});return r.querySelectorAll("[data-reveal-index]").forEach(e=>t.observe(e)),()=>t.disconnect()},[e,t,r]),{containerRef:l,visibleIndices:s}}},2874:(e,t,r)=>{"use strict";r.d(t,{W:()=>x});var n=r(7282),a=r(1514),s=r(1405),o=r(9914),l=r(3387),i=r(4759),c=r(2991),d=r(5626);let u=[{key:"low",label:"0.015 SOL",amount:15e6,desc:"Standard"},{key:"normal",label:"0.025 SOL",amount:25e6,desc:"Enhanced"},{key:"high",label:"0.035 SOL",amount:35e6,desc:"Priority"},{key:"breaking",label:"0.045 SOL",amount:45e6,desc:"Breaking"}];function x(e){let{contentHash:t,enclavePda:r,className:x=""}=e,[p,m]=(0,a.useState)(!1),[h,b]=(0,a.useState)(0),[g,f]=(0,a.useState)(""),[v,y]=(0,a.useState)(!1),[w,j]=(0,a.useState)(null),k=(0,a.useRef)(null),{connection:N}=(0,o.w)(),{publicKey:S,connected:C,sendTransaction:T}=(0,l.v)(),{setVisible:E}=(0,i.o)();(0,a.useEffect)(()=>{if(!p)return;let e=e=>{k.current&&!k.current.contains(e.target)&&m(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[p]),(0,a.useEffect)(()=>{if(!p)return;let e=e=>{"Escape"===e.key&&m(!1)};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[p]);let P=(0,a.useCallback)(()=>{if(!C)return void E(!0);j(null),m(!0)},[C,E]),O=(0,a.useCallback)(async()=>{if(S&&!v){y(!0),j(null);try{let e,n=u[h],a=await fetch("/api/tips/preview",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({content:g||"Tip for post ".concat(t.slice(0,12)),sourceType:"text"})}),o=await a.json();if(!o.valid||!o.contentHashHex)return void j({ok:!1,text:o.error||"Preview failed"});try{e=r?new s.J3(r):s.yq.programId}catch(t){e=s.yq.programId}let l=(0,c.Y5)(),{tip:i,instruction:d}=(0,c.Ne)({tipper:S,contentHash:(0,c.Ef)(o.contentHashHex),amountLamports:BigInt(n.amount),sourceType:"text",tipNonce:l,targetEnclave:e}),x=new s.ZX().add(d),p=await T(x,N,{skipPreflight:!1});await N.confirmTransaction(p,"confirmed");try{await fetch("/api/tips/pin",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({tipPda:i.toBase58(),snapshotJson:JSON.stringify({v:1,sourceType:"text",url:null,contentType:"text/plain",contentPreview:g||"Tip for post ".concat(t.slice(0,12)),contentLengthBytes:(g||"Tip for post ".concat(t.slice(0,12))).length})})})}catch(e){}j({ok:!0,text:"Tip of ".concat(n.label," sent on-chain!"),sig:p})}catch(e){j({ok:!1,text:e instanceof Error?e.message:"Unknown error"})}finally{y(!1)}}},[S,v,h,g,t,r,N,T]),_="?cluster=".concat(encodeURIComponent(d.Bs));return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("button",{type:"button",onClick:P,className:"group/tip inline-flex items-center gap-1 px-2 py-1 rounded text-[10px] font-mono\n          text-[var(--text-tertiary)] hover:text-[var(--deco-gold)] hover:bg-[rgba(201,162,39,0.08)]\n          transition-all cursor-pointer ".concat(x),title:C?"Tip this post":"Connect wallet to tip",children:[(0,n.jsx)("svg",{className:"group-hover/tip:animate-[wiggle_0.4s_ease-in-out]",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:(0,n.jsx)("path",{d:"M12 2v20M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"})}),(0,n.jsxs)("span",{children:["Tip",(0,n.jsx)("span",{className:"opacity-0 group-hover/tip:opacity-100 transition-opacity",children:"!"})]})]}),p&&(0,n.jsxs)("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4",children:[(0,n.jsx)("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:()=>m(!1)}),(0,n.jsxs)("div",{ref:k,className:"relative w-full max-w-sm rounded-xl overflow-hidden bg-[rgba(10,10,15,0.98)] backdrop-blur-xl border border-[var(--border-glass)] shadow-[0_16px_64px_rgba(0,0,0,0.5),0_0_24px_rgba(153,69,255,0.1)]",children:[(0,n.jsxs)("div",{className:"px-5 pt-5 pb-3 flex items-center justify-between",children:[(0,n.jsx)("h3",{className:"font-display font-semibold text-base text-[var(--text-primary)]",children:"Tip Post"}),(0,n.jsx)("button",{onClick:()=>m(!1),className:"text-[var(--text-tertiary)] hover:text-[var(--text-primary)] transition-colors",children:(0,n.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,n.jsx)("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),(0,n.jsx)("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),(0,n.jsxs)("div",{className:"px-5 pb-5 space-y-4",children:[(0,n.jsxs)("div",{className:"text-[10px] font-mono text-[var(--text-tertiary)]",children:["Post: ",t.slice(0,16),"…"]}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)("label",{className:"text-xs font-mono uppercase tracking-wider text-[var(--text-tertiary)]",children:"Amount"}),(0,n.jsx)("div",{className:"grid grid-cols-2 gap-2",children:u.map((e,t)=>(0,n.jsxs)("button",{type:"button",onClick:()=>b(t),className:"px-3 py-2.5 rounded-lg text-left transition-all ".concat(h===t?"bg-[rgba(201,162,39,0.12)] border border-[rgba(201,162,39,0.3)] text-[var(--deco-gold)]":"bg-[var(--bg-glass)] border border-[var(--border-glass)] text-[var(--text-secondary)] hover:bg-[var(--bg-glass-hover)]"),children:[(0,n.jsx)("div",{className:"text-xs font-semibold",children:e.label}),(0,n.jsx)("div",{className:"text-[10px] opacity-70",children:e.desc})]},e.key))})]}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsxs)("label",{className:"text-xs font-mono uppercase tracking-wider text-[var(--text-tertiary)]",children:["Message ",(0,n.jsx)("span",{className:"normal-case",children:"(optional)"})]}),(0,n.jsx)("input",{type:"text",value:g,onChange:e=>f(e.target.value),placeholder:"Great post!",maxLength:280,className:"w-full px-3 py-2 rounded-lg text-sm bg-[var(--bg-glass)] border border-[var(--border-glass)] text-[var(--text-primary)] placeholder:text-[var(--text-tertiary)] focus:outline-none focus:border-[rgba(201,162,39,0.3)] transition-all"})]}),(0,n.jsxs)("div",{className:"p-3 rounded-lg bg-[var(--bg-glass)] border border-[var(--border-glass)]",children:[(0,n.jsxs)("div",{className:"flex justify-between text-xs text-[var(--text-secondary)]",children:[(0,n.jsx)("span",{children:"Tip amount"}),(0,n.jsx)("span",{className:"font-mono",children:u[h].label})]}),(0,n.jsxs)("div",{className:"flex justify-between text-[10px] text-[var(--text-tertiary)] mt-1",children:[(0,n.jsx)("span",{children:"Account rent"}),(0,n.jsx)("span",{className:"font-mono",children:"~0.002 SOL"})]}),(0,n.jsxs)("div",{className:"flex justify-between text-xs text-[var(--text-primary)] font-semibold mt-2 pt-2 border-t border-[var(--border-glass)]",children:[(0,n.jsx)("span",{children:"Total"}),(0,n.jsxs)("span",{className:"font-mono text-[var(--deco-gold)]",children:["~",((u[h].amount+2005e3)/1e9).toFixed(3)," SOL"]})]})]}),w&&(0,n.jsxs)("div",{className:"p-3 rounded-lg text-xs ".concat(w.ok?"bg-[rgba(0,255,100,0.08)] text-[var(--neon-green)] border border-[rgba(0,255,100,0.15)]":"bg-[rgba(255,50,50,0.08)] text-[var(--neon-red)] border border-[rgba(255,50,50,0.15)]"),children:[w.text,w.sig&&(0,n.jsx)("a",{href:"https://explorer.solana.com/tx/".concat(w.sig).concat(_),target:"_blank",rel:"noopener noreferrer",className:"ml-2 underline opacity-80 hover:opacity-100",children:"View TX"})]}),(0,n.jsx)("button",{type:"button",onClick:O,disabled:v,className:"w-full py-3 rounded-lg text-sm font-semibold bg-gradient-to-r from-[var(--deco-gold)] to-[rgba(201,162,39,0.8)] text-[#0a0a0f] hover:shadow-[0_0_20px_rgba(201,162,39,0.3)] transition-all disabled:opacity-40 disabled:cursor-not-allowed",children:v?"Signing…":"Send ".concat(u[h].label," Tip")}),(0,n.jsx)("p",{className:"text-[10px] text-[var(--text-tertiary)] text-center font-mono",children:"70% platform treasury \xb7 30% enclave treasury (Merkle rewards)"})]})]})]})]})}},3211:(e,t,r)=>{"use strict";r.d(t,{h:()=>i});var n=r(7282),a=r(1514);let s=/`([^`]+)`|!\[([^\]]*)\]\(([^)]+)\)|\[([^\]]+)\]\(([^)]+)\)|\*\*(.+?)\*\*|\*([^*]+)\*/g;function o(e,t){let r,a=[],o=0,l=t;for(s.lastIndex=0;null!==(r=s.exec(e));)r.index>o&&a.push(e.slice(o,r.index)),void 0!==r[1]?a.push((0,n.jsx)("code",{className:"px-1.5 py-0.5 rounded bg-[rgba(255,255,255,0.06)] text-[var(--neon-cyan)] text-[0.9em] font-mono",children:r[1]},"md-".concat(l++))):void 0!==r[3]&&"!"===e[r.index]?a.push((0,n.jsx)("img",{src:r[3],alt:r[2]||"",className:"max-w-full rounded-lg my-2 block",loading:"lazy"},"md-".concat(l++))):void 0!==r[4]&&void 0!==r[5]?a.push((0,n.jsx)("a",{href:r[5],target:"_blank",rel:"noopener noreferrer",className:"text-[var(--neon-cyan)] hover:underline",children:r[4]},"md-".concat(l++))):void 0!==r[6]?a.push((0,n.jsx)("strong",{children:r[6]},"md-".concat(l++))):void 0!==r[7]&&a.push((0,n.jsx)("em",{children:r[7]},"md-".concat(l++))),o=r.index+r[0].length;return o<e.length&&a.push(e.slice(o)),a}let l={1:"text-xl font-display font-bold mt-5 mb-3 text-[var(--text-primary)]",2:"text-lg font-display font-semibold mt-4 mb-2 text-[var(--text-primary)]",3:"text-base font-display font-semibold mt-3 mb-2 text-[var(--text-primary)]",4:"text-sm font-display font-semibold mt-3 mb-1 text-[var(--text-secondary)]",5:"text-xs font-display font-semibold mt-2 mb-1 text-[var(--text-secondary)]",6:"text-xs font-display font-medium mt-2 mb-1 text-[var(--text-tertiary)]"};function i(e){let{content:t,className:r=""}=e,s=function(e){let t=e.split("\n"),r=[],n=0;for(;n<t.length;){let e=t[n],a=e.match(/^```(\w*)/);if(a){let e=a[1]||"",s=[];for(n++;n<t.length&&!t[n].startsWith("```");)s.push(t[n]),n++;n++,r.push({type:"code",lang:e,lines:s});continue}let s=e.match(/^(#{1,6})\s+(.+)/);if(s){r.push({type:"heading",level:s[1].length,text:s[2]}),n++;continue}if(/^(-{3,}|\*{3,}|_{3,})\s*$/.test(e)){r.push({type:"hr"}),n++;continue}if(e.startsWith("> ")||">"===e){let e=[];for(;n<t.length&&(t[n].startsWith("> ")||">"===t[n]);)e.push(t[n].replace(/^>\s?/,"")),n++;r.push({type:"blockquote",lines:e});continue}if(/^[\-\*]\s+/.test(e)){let e=[];for(;n<t.length&&/^[\-\*]\s+/.test(t[n]);)e.push(t[n].replace(/^[\-\*]\s+/,"")),n++;r.push({type:"ul",items:e});continue}if(/^\d+\.\s+/.test(e)){let e=[];for(;n<t.length&&/^\d+\.\s+/.test(t[n]);)e.push(t[n].replace(/^\d+\.\s+/,"")),n++;r.push({type:"ol",items:e});continue}if(""===e.trim()){n++;continue}let o=[];for(;n<t.length&&""!==t[n].trim()&&!t[n].match(/^```/)&&!t[n].match(/^#{1,6}\s/)&&!t[n].match(/^(-{3,}|\*{3,}|_{3,})\s*$/)&&!t[n].startsWith("> ")&&!t[n].match(/^[\-\*]\s+/)&&!t[n].match(/^\d+\.\s+/);)o.push(t[n]),n++;o.length>0&&r.push({type:"paragraph",lines:o})}return r}(t);return(0,n.jsx)("div",{className:r,children:s.map((e,t)=>(function(e,t){switch(e.type){case"heading":return a.createElement("h".concat(e.level),{key:t,className:l[e.level]||l[3]},o(e.text,1e3*t));case"code":return(0,n.jsx)("pre",{className:"my-3 p-4 rounded-lg bg-[rgba(0,0,0,0.4)] border border-[var(--border-glass)] overflow-x-auto",children:(0,n.jsx)("code",{className:"text-xs font-mono text-[var(--text-secondary)] leading-relaxed whitespace-pre",children:e.lines.join("\n")})},t);case"blockquote":return(0,n.jsx)("blockquote",{className:"my-3 pl-4 border-l-2 border-[var(--neon-cyan)] text-[var(--text-secondary)] italic",children:e.lines.map((e,r)=>(0,n.jsxs)(a.Fragment,{children:[r>0&&(0,n.jsx)("br",{}),o(e,1e3*t+100*r)]},r))},t);case"hr":return(0,n.jsx)("hr",{className:"my-4 border-t border-[var(--border-glass)]"},t);case"ul":return(0,n.jsx)("ul",{className:"my-2 ml-5 list-disc space-y-1",children:e.items.map((e,r)=>(0,n.jsx)("li",{className:"text-sm text-[var(--text-primary)]",children:o(e,1e3*t+100*r)},r))},t);case"ol":return(0,n.jsx)("ol",{className:"my-2 ml-5 list-decimal space-y-1",children:e.items.map((e,r)=>(0,n.jsx)("li",{className:"text-sm text-[var(--text-primary)]",children:o(e,1e3*t+100*r)},r))},t);case"paragraph":return(0,n.jsx)("p",{className:"my-2",children:e.lines.map((e,r)=>(0,n.jsxs)(a.Fragment,{children:[r>0&&(0,n.jsx)("br",{}),o(e,1e3*t+100*r)]},r))},t)}})(e,t))})}},3387:(e,t,r)=>{"use strict";r.d(t,{b:()=>l,v:()=>i});var n=r(1514);let a=[],s={autoConnect:!1,connecting:!1,connected:!1,disconnecting:!1,select(){o("call","select")},connect:()=>Promise.reject(o("call","connect")),disconnect:()=>Promise.reject(o("call","disconnect")),sendTransaction:()=>Promise.reject(o("call","sendTransaction")),signTransaction:()=>Promise.reject(o("call","signTransaction")),signAllTransactions:()=>Promise.reject(o("call","signAllTransactions")),signMessage:()=>Promise.reject(o("call","signMessage")),signIn:()=>Promise.reject(o("call","signIn"))};function o(e,t){let r=Error(`You have tried to ${e} "${t}" on a WalletContext without providing one. Make sure to render a WalletProvider as an ancestor of the component that uses WalletContext.`);return console.error(r),r}Object.defineProperty(s,"wallets",{get:()=>(o("read","wallets"),a)}),Object.defineProperty(s,"wallet",{get:()=>(o("read","wallet"),null)}),Object.defineProperty(s,"publicKey",{get:()=>(o("read","publicKey"),null)});let l=(0,n.createContext)(s);function i(){return(0,n.useContext)(l)}},4759:(e,t,r)=>{"use strict";r.d(t,{o:()=>l,w:()=>o});var n=r(1514);let a={setVisible(e){console.error(s("call","setVisible"))},visible:!1};function s(e,t){return`You have tried to  ${e} "${t}" on a WalletModalContext without providing one. Make sure to render a WalletModalProvider as an ancestor of the component that uses WalletModalContext`}Object.defineProperty(a,"visible",{get:()=>(console.error(s("read","visible")),!1)});let o=(0,n.createContext)(a);function l(){return(0,n.useContext)(o)}},5626:(e,t,r)=>{"use strict";r.d(t,{Bs:()=>s,PF:()=>a,dO:()=>l,p3:()=>i});var n=r(1405);let a="3Z4e2eQuUJKvoi3egBdwKYc2rdZm8XFw9UNDf99xpDJo",s="mainnet-beta"==="devnet".trim()?"mainnet-beta":"devnet",o="https://api.devnet.solana.com",l=o&&/^https?:\/\//i.test(o)?o:(0,n.Kw)(s),i="mainnet-beta"===s},6470:(e,t,r)=>{"use strict";async function n(e,t){let r=await fetch(e,{cache:"no-store",...t});if(!r.ok)throw Error("Request failed: ".concat(r.status," ").concat(r.statusText));return await r.json()}r.d(t,{x:()=>n})},6540:()=>{},7679:(e,t,r)=>{"use strict";r.d(t,{g:()=>o});var n=r(1514),a=r(6470);async function s(e,t){let r;for(let o=0;o<=3;o++)try{return await (0,a.x)(e,{signal:t})}catch(e){if(t.aborted)throw e;if(r=e,e instanceof Error){var n,s;let t=parseInt(null!=(s=null==(n=e.message.match(/(\d{3})/))?void 0:n[1])?s:"0",10);if(t>=400&&t<500)throw e}o<3&&await new Promise(e=>setTimeout(e,1e3*Math.pow(2,o)))}throw r}function o(e){let[t,r]=(0,n.useState)(null),[a,o]=(0,n.useState)(!!e),[l,i]=(0,n.useState)(null),[c,d]=(0,n.useState)(0),u=(0,n.useRef)(0),x=(0,n.useCallback)(()=>{o(!0),d(e=>e+1)},[]);return(0,n.useEffect)(()=>{if(!e)return void o(!1);u.current+=1;let t=u.current,n=new AbortController;return o(!0),i(null),s(e,n.signal).then(e=>{t===u.current&&r(e)}).catch(e=>{t===u.current&&(n.signal.aborted||i(e instanceof Error?e.message:String(e)))}).finally(()=>{t===u.current&&(n.signal.aborted||o(!1))}),()=>n.abort()},[e,c]),{data:t,loading:a,error:l,reload:x}}},9914:(e,t,r)=>{"use strict";r.d(t,{E:()=>a,w:()=>s});var n=r(1514);let a=(0,n.createContext)({});function s(){return(0,n.useContext)(a)}}}]);